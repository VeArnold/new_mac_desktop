# Automatically generated on 2021-02-15 UTC from https://codemagic.io/app/602a9133ede2fe1e69c5f5ee/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      vars:
        APPLE_ID: arnold@nevercode.io
        APPLE_PASSWORD: Encrypted(Z0FBQUFBQmdMVE9BeEh2N0F6UjY4VWE5TTFLZngtRnFKZ0s5MjM0SE8zUHlMT09pcjFxaWVHcGdHcWpaclNoWG5FQUQ2MjA1VVlmMC0xSUlJV25yVFJWOUdQZjdlMTQ4cGhMcndHM0tCUEJVSE9vamtvMXZpVG89)
        APP_STORE_CONNECT_ISSUER_ID: 7d812fe2-8abd-47ca-9d27-3ed7e62d7b6d
        APP_STORE_CONNECT_KEY_IDENTIFIER: YPR7S6PKRT
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmYwS3JKdWhGZnhURG5fSDJPanVfa290YVNzNF93czh2UHM2ODZMNGw4UnBIa3dITmNxYllaTXFfM1g3d1ZwN3lhMXFYeWhObXZtWnVGZ3ZES3BjQ1R4UFZQbUVnUmRNNkVvQTB3NHZyZVd4NG1ORkItbDdKRWRaelViNzVwdXRBV2stZWVBQjJTQ28xcnlZWHVKQmo2N3M0dEY3ekVwWW0wSFZrMkg3NTluYzQwVDR3WU90ZDNTUkdjUllIeFlMOHZEUURia1Bjb2xFRG9MMk56X1lkWHdoWnJfT0NKUTdyRkxEX25Wb1ozbF9ia0pyTjhLRm43cnhvdEFkRU1CbnNJNFNlTnI5bjJVRDd1VHRhTWRrM2RyWWo0blBfTlN1WU9KOFJIZFpYQTFEOVdkMERZc20yMmJsNlRWTEl2Q1BYWWhfZlN1VTBkN1MtUjdvaVJ0cDVPSy1NX2g1WlZGSjVfbHIyQVZFVHZ0VDFEZTJsWHBoeVNFOUtBNTNIeFE0TFZQQWtNVjk3RHdLRTdOTmV3OXdxdUY5MnFTd0hJTVVsamRiQ1R3cFJmaDJUX1RrVT0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmYwS3I5QnNxanE4cDJremJ5Vm1MTnY2WmlHeVNqeW0zOWpyTmtjdnJZT001a3NoUldRcFd3cXlkbXMwRVZDeEdNaDM1c2tLeHczSzZPTDB0eGU0RWVralVxeFlhVnlvSHM3emFFTWtMYVlZOXBDbjQtNWRmN2xraU1tUzVqYUd2VlR5VG5xOUp3OFRuV1I1b3Q1UW1NbWlPVTMxckZrQnk1ZFlLYmNGYS1vNmVfRlFBVmlNVXVPUFRaaGFRS0pzTXlUazZrQlo1ZlV4aXBCT3d0TG9hODAyYzZtSl80ZUNtWGlHV0RSdVZUbFAzUWNic3pQZTM3STdQWGRkcnh2ZnhRXzlkVkVnMUdZUVBWUUpiUTQ2bTdTSTdLaGl6MkJTRnZTY0xTUWVpTzRUdFRPTEZuS2dmWFJLeHl3NHExTERRUEp2ZVNNeGtIS1c2Rk5EM2xfZVNEZlJJa2tvU0NXMEVPSzdOd0FfRXp5aWNLb3JFOUs4RjltUndRRlprOXdIbDZuaTQwWV95eDhkazhsUnBSUkk2bzlBZXdrZ2preUxBeEFLVGhXeHFCQ1JEdm1GNEdaQXJObmZCQ0pnRmF4TUdqYlR4QnluQ0lHa0lkcGZZRnY5X2I4OEhWcWJzSjZOd3pfeTI4OWdYeklyeGFGcXRNWGJSTzE1amRGOWh3cW5QcjNmVzcyU2xNQWo4OWhGQURlT0dQbVl2cHlCM1pMV0JXMnBULVJodVFMMTBYZ2tsV2VEZDlPZkFSUU5IOHJoeFJpeHBFandZTS15UGNnamVEM2xaZ3k2al9TTm1saWQ0MjRrRE9PMmM4cTVoTGRubllZbjhIaEJFdi1KTmdTSG5yaDhtMzNKeEZ1ZGhpVTgzX3dTMWhycDBwZExEMlRDT2hEZnZaR3dieTR5eFpTbTRNNVNEcFFqUlB3MHBxUmVrNkhXREFyWlZWSWtVSmFHeEpDM1Ryd242V01BTlM5MlR5dk5UVWdvZlQtX0pSdmxCd1VaUVFWNy01Rm5pajFSaklnWWlNQ29zWnc2Q2tPaEVVcm1JRnlvdkh5bE52azhOSlB5bDgxN0FNQzZEUzhBLUlSTEIwd3Yyc3ROSkp5cDdZTGhJMEswcjJRNXpjSXppakFsN1dMLXh5NlQxVzZkVi1fSFpzcUtxcUlLbWk1QVE1ejBCcW9fcHdZUjljdXoyQ18wMlFPMFRWNzQzSVZocV9aM2JyM3A1a3pnTTktOVdKZ3BNSEdxTUlCWjVZeFhWN0NDZ3RUdDN3VHE1cjdHVUZaNVVLVmpQa2NWaXF5UElaNzRpQm5oUmFkRnhCVWhMTGdvaktaMVRKNlFyZlRCZGtCaHRJV01SSXpDN2ZiNmRVU29TMkltOWZ0VFdUSUUtcDExdlZGZE9fd2xMQll6NG1wd0g1MXBMYVZMT3RRRXJBWDg4R0RPaUxFTzdLUGx0S3VVQVFzdVcwZnpWT0U3VDk1bGRFbTFEejN4akVEdUZDNGM0aXc3N185NjQzd0g2U1VzN0ozRlRJOXNNZkd6ZXM2NTlpM0JyTmVSYjJfVG9BcDNCWGhFWWl5Wi1lcWhocnd4WnV6SnhfN0lNbk5oVFAxU0NwM1NkUWR5Y1dnaWxCUE5MdU5SZ2tFcFNGS2MzbzdvTUtpMVpOZ3RxSXlwVV80TXNrT3BzeFl3Q3BLVk1KT2stcmowM1hFZUVORmprLTM1X2FUNk9RNlh6SndDa0hWdlhfTFpZb01wM2dGLWZWM2hrc1N5TlNuemZpejk3enRwYktpSmpqMy03MTNGcUpsU3VQNEpHdmVwVG90OS1EOW4xTExtMTU4SUkxbWJyTnlweXRzSHp0T3cydzZjdkNKdUlveEE4TGU1b2xqYjNPeFVaMUplWUhKeUVZTVV4ak1vT2U0VGtRb1RtSlZsT0pIZ0FHYkZLQWpnczlic2IwS0U4WUZPb2VFMjUxRHNkZDVCZTd3b3N4NWsyMm4zTHdCSFJKUnk2bWdnU3BUNGdwTDdULU15RXhUdTVLZW96S3BBMEEzOUV4TmV4ZG9LTUFYV0Roemt6V2xNblVMYnozcm5FMWNyZ2M0cjIwY3h0MUJ2eTFTMklWQjhNN3RRZ2kxWlhnWGxXakU4NnNJQkVxbmtYaGpkbVJ3MkxCNllJeW0yWHJULXFtYlplU09USkZyWm91d05uYllrN3g3MW9oTEpzOXczcjEwckVpZ0V3NlQtWlZzM1ZHanBDUXF4NVA4cjFRSExLN2hOdnljY2Q4MVE4a3lVSVpnR3dxVXlwcXhTeHZEUjczZUJfNVRzSXpSR05SczBHeW9qcHRWY0Z6MFhEQS1HUXBIU1lhRFJzRVJlamlTM29qN2c2UFZETGY0N0NjVkJWV0V2aFg4bUVfaDhsVTFpbFZaTG9qOG5wMHg0WUZJd2cwcXd2cmNTX3kySHJsWGp1c3FBYldVcTVBTWVvRXI5eG53T3hKVnZIMWhGS2w5SGl4LWNmQkNjSWhDTDluYl8zSEswWlhLZ1VVcVRuUUFlaXRKYVZoVjNlLWpvSHNkUE1JU2dHNktPS1kwWGxvRmJxMXZmMEFRZmxkNjBKaXp4dWtwT0JZaEZ5NnhYdzA5bVJYUHhCVUJRWnFJdGtyb0s5UUY1Tjd2Q1FyT1NjbllaZVMxdUpocDJjUFQ2Z1U5Nk4tQmJCcjBtQkhKVDN6b1o0NDktWGlrdXBnaW0tbnZXRmlLOHZsNXk5Q09DbU9WN29DWFlTWW5SNVM0U1BRX1lwUDdSakh2SlFQaXdTRkpGbUtnQnFqa2RqTmVwX0ZXSjJOZnpMVHVzNGNzQmpNQXN1TTVPbHhkREd1NEJ4ME9RYklJekpma2ltc1VKQ3ZrUVVTdnZvYnlWbW5Ea3pMVEtZU0RxMFZZR1doMm0zVWlwd1NWLWhudTJyRTNfOXFUZ18xX0ZmU0d0WkV4OWx3MVhGd3RQWldaTVdkUXdsMTd0SWk0V1ExYzhjU1JsMTVrYm9ieS1PZ2JfeGNVMDNNNWY5bE5sRWJvaktlUFlZWTF4dXFidml4TGFWd29oWmQzd19xd19fZ1RIRDhNaVpz)
      flutter: dev
      xcode: latest
      cocoapods: default
    scripts:
      - flutter packages pub get
      - |
        #!/usr/bin/env bash

        keychain initialize
        app-store-connect fetch-signing-files "com.codemagic.newMacDesktop" --type MAC_APP_STORE --platform MAC_OS --create

        flutter config --enable-macos-desktop
        flutter build macos --release --build-name=1.0.0 --build-number=$BUILD_NUMBER
        chmod +x sign_and_publish.sh

        ./sign_and_publish.sh
    artifacts:
      - flutter_drive.log
      - build/macos/Build/Products/Release/*.app
