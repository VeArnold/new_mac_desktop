# Automatically generated on 2021-02-15 UTC from https://codemagic.io/app/602a9133ede2fe1e69c5f5ee/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      vars:
        APPLE_ID: arnold@nevercode.io
        APPLE_PASSWORD: Encrypted(Z0FBQUFBQmdMVE9BeEh2N0F6UjY4VWE5TTFLZngtRnFKZ0s5MjM0SE8zUHlMT09pcjFxaWVHcGdHcWpaclNoWG5FQUQ2MjA1VVlmMC0xSUlJV25yVFJWOUdQZjdlMTQ4cGhMcndHM0tCUEJVSE9vamtvMXZpVG89)
        APP_STORE_CONNECT_ISSUER_ID: 7d812fe2-8abd-47ca-9d27-3ed7e62d7b6d
        APP_STORE_CONNECT_KEY_IDENTIFIER: TY6Z3SLR3Z
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmdMVUhQV241bVF2dlI5al9naTg5YVJXbWotNVFYblIwZVhrWi1DUzZEdDRWbUkxQmN4Nk85QmxXUzRyeDQwOU90NndDRHZseElHSV9tbEg5b05MWkc2TzBFamlfTmNXcTVGSkJfSHdLRnVmWEQwT3V5OTNFSXROd09HTGx4dm9VdGRYbXBpYklnYUI4UG54Q1BCRGJ6X3VPMXA5T1hqRGVBejZGSUVCdXdEdVY2Z1dKazR4eW9MMElMd3lEYmxVY2JYcFUyM3k0Q1Q1bVJHQXVPWjEyS2IxRXlqNXRFcVFuX0gtWUFmWFlrZ29ldks0NjBYRkg0bnA1NWFsWUt3VEJzTjh0OWpmYU0yb0xRNXluUVJnTzdWUXNRWHVtcV9mem9OWFRXNnhHQU9PNUF0NE1xdXRfdEU0bkVhYlA0VTFTcGVlbTB0S3BUTlY2UzNOT3l6YlRmdlZjV0Y4Nm5GcDhlTFJNN3QyemtIQ2J4R3dOR3R6TVZnakFFT1hTdFBrT19TcVVBR0ZrczllQkd6eEtKZkVwSEx4cm9vazRWeEFvaTZvcVJwVU1RczZHOFpvdz0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmdMVFhvcHVUUk92MXB1RXg0V2IwQURrNE5INkRIdWZtTUhrMUlLd2hiQkNpWnZZRmxqUHlSSUlYQzBldUxRMUJqX3lFYmVhOTMxNk91d2lFbnRyWWYyS0lkRlVQVTJOY0tsLVR2NUhULWlLd05WemNqR29YRmNzUkltZ0hQTTIyMUhzLVdZSElTcVdpVmhWcUNPQjVkUmpfMEVqVm5iU2xRWEJBWUxyajFOSFlkMDc3ZUNkZ3ZsMlZMTS1sMkJUR1dNczFCLU9hY1I4bENSQzVZMGZkcHNwM3dkdWpaRUxkME1tU0NmZHJfSDc3eGg5bGIxRy16RzdRSDhtbDNxSDlRelMwc1REaTJSOUIyb1dkZWRDODVNZmg0OG1sSDV2NGRpVHpHbGNibjhqYXA1bWdCUDhXcl9mNGhDaEZHZ0xOV0FQTXU3cjFwX1BhdWpYV25DakJ5OWxpREJGVWY0Xy1TdF9TY21ZeUd2WTRUcjREdlRLOGZYTTZXT3ZwR09qekMtS252LVdCVzFseDdFVDYtMk5fNGlTb2M4UmNVZzM1ODhjT0RTRG54YzRIMnc5VGlyRnI1aDhncXRLYmI1SUZoYmpFUnZCQUdFV0pmMWxGRjlSMHVSNTY3OXMtMFZON2k4WTQ4RGlxUE1fNVc4MzREQUk5aEdOZWZHX0NoakZWYUY5MkIySFpFcTBOejNVZE1nRkhnLXVTOTFwQm5sSWJoNlk5QnNBZm5MaHNSYkN6dGlHTFlfbW1jTGZlMXZzM2QzU3VmdFR2REhiQkQ0MDZ3aFJFWjR6M0dKQWRsWHZ2Q0V2a3REdHRVQlVJUnRaMnE0c0ExdkppeVZpa0dKNzZNTjRJcl9STUtQRk1laVYycUY1YTlJeGphRnNkaGxSMmRQZzJuSWlrWjFOM3ptYVJtNWdtS3VNM1QxeFdqY0xKa0FaU2JkbjN2WTlBUkZRZG9RRFQwbWRMNUZuUldBSXNjLWsyTTZWNjVYTHBvQ1hHZ3E0bmNfaC1TaDRYelpsbWd2YU5sdnVRVE14MnlMNTFYVGUzZkdYUEZPZnJTdEJpQkRlN3VxRFh1SnhqZ0dZRnozUjdyTkFnX0tndFlxcEVQVUJ1TUNrUkhmT2RtRF81aXNFN1BLNlJicUNQN3JDdTdTTzhOX1RtTTFLQ21NNkpGVTZsZ21idjlsbFRMNkhjWmFlYVotQUlQSEx5b0lxX0JSaFl1aTMwWGozbm95QkdMUENTeUc4enE2N2Ezd3pkcWNqLUJmaGV1WlRqSjZ2QmpudXJDcmpkUFVoWGI3SG51TmhBcHd4S0ltT2g4cXN2N2pKZ0lPUkJtZWJPVTZEQVZ2ZmRXRVhKU1F6OEhiaW1FYnV3TnpTUW5Bb2kxZFBZWTNKT0ZhVXFDM3dJZ1JUelRfenpYM3hCNTA0MHlKUmFWeWp2MmFhQ3Njcnl2cGhCV1VWRngtbk9Ga3BKQXNLVTBPWkczLW1lSGtKUUkwZDVQQS1ydVNRNmNOXzJTY0poTlBpeEJodWFveU1hVDVOSFNyVC1zTGRyd2lDMlZOSHhIdXdKX09ha2JyTlIzMmRLMGdsZklSSGZsTE5vOFV5SHY2aFFhblZOaVZvNFpueFZjNVR4OW9oRHJMa2NXUWpDTnhXVTFXTHYwT3ZvU25qQWxHZGNJaWkxODBfSS1aX0xiNk9wVzBpaG96b1RxNFN2cnd1WlVxMTE1MmQzdmNDVFlzeVp2VlFlc2R0WGxNUXZhOFhtRnVKZEdUcVFBbXB0bjRESkI3dENLdk9yYl9ieTJwbjRyblR3YTVUUUE4eVQ2Y19qbnZHRUxtQ0F6Mk4zblc0dXJZbjdJX3dVZ3R6T2dsZHpYbXJwaUxfTW1oYWFWVnA3RnJvRDR4M3pUSG5yUnBKUjVhRE1aQ2gyMnMtdklHRE9wVUI3eGx3aGRBNEhUS3MzVE10WDBMcnNvZkJnOGZZUm1CNlFOdVI2cDhibG0zT2Y5ZGh4WmMwMXBYZkF5NEs2VFJWM2NFSm9RMkw3eXo3bGFTSkVBVGF1VUdJZ1dHWjV3eXVEYWhaU0RRVHVWU0RLZmJNWEZOVzJnb3dOQzdQNzR3WUY2cjZKV1RxclIxeEJKdUdCQlZFSEVqcmhHTEtqcFltMjU2cVNLc2p5ZUhBb3EtdlhjQzJON3ZtdzJfMjdNNmNrdkNLMG9NODFjcmVMR1FMaTI3ZkFWRW9yV05VcXcxREhuZTMxR3VkemxjVGxwckV1b2pkRnlzb3g0eUE1WlFIRW9ZUm1xdFJQbE10VVAwRXhHU3BnNk1zelVVNUJ2U3pkME9weUNydjh4NEtDS21tazVOSDAyTGpULUs0RDQzQWVOUUpTNTZla3MteWlxWkxHN0pTSThfNURvTm45NlNQTmlyY191Z0xUOGRKWlljbElnUU8wczdmWkU2cmFjVldmRVpqYk9HXzN0cEpyemFqakFQYnZEZWFORTlZN1ZIS2dlbF93WkZVTzZqR0tYOXBXaVk4UTZSdlZ1X2VpQzAzWUgzYklJVHljMUY4cHB3WkxFUmdxeURmVlg3dGp2dVFlZXRQQ1ZUeWUycmZlRUVTTjNTTUhFWmRkZjMzYlRVbFlDVnVRdmgwd1dwTG9nVjFFc1gtelFpZ3FtMUExODJtYjJ0V1VXU2s5ejRiSlJNeEQwRTRNUHlHUlJEYkJBRE5TbkJtTGNXUFh4UUVkVVltdXJzUG9VWVdGWG5tYWhsRmdXTjQtUzBTS3lZRFNpR3A0a084R0JWaGxlU0Q0eHRSUHNTNURJbEVSNUpGdGp2dnBmY2VNUmd2aVhSRGNVU3hRejVKczY4VlZabnJiU2Zjd0Y5WXd2bktCNE5Kc2l6UmpKeUxMVklIYVUtdXRWX0sxSzhUcDM4T3NDdkJnRkZLMS10eGJONzRURG43Um8xMTFKZE1odnQtbDlMTU1Eb2xfV1B6Qy1pUm95YWJQRzA5ZlZ6a1BpWmxmNEMydVdPSGRyaUotWDZoUFFaRzZ2czRnRHJobGlYdVVoU0FsQkpaai1wSzc1TThkdHB1MnZ0M29yTVFGdUhERVdpczBT)
      flutter: dev
      xcode: latest
      cocoapods: default
    scripts:
      - flutter packages pub get
      - |
        #!/usr/bin/env bash

        keychain initialize
        app-store-connect fetch-signing-files "com.codemagic.newMacDesktop" --type MAC_APP_STORE --create

        flutter config --enable-macos-desktop
        flutter build macos --release --build-name=1.0.0 --build-number=$BUILD_NUMBER
        chmod +x sign_and_publish.sh

        ./sign_and_publish.sh
    artifacts:
      - flutter_drive.log
      - build/macos/Build/Products/Release/*.app
