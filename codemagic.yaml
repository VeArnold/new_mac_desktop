# Automatically generated on 2021-02-15 UTC from https://codemagic.io/app/602a9133ede2fe1e69c5f5ee/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      vars:
        APPLE_ID: arnold@nevercode.io
        APPLE_PASSWORD: Encrypted(Z0FBQUFBQmdMVE9BeEh2N0F6UjY4VWE5TTFLZngtRnFKZ0s5MjM0SE8zUHlMT09pcjFxaWVHcGdHcWpaclNoWG5FQUQ2MjA1VVlmMC0xSUlJV25yVFJWOUdQZjdlMTQ4cGhMcndHM0tCUEJVSE9vamtvMXZpVG89)
        APP_STORE_CONNECT_ISSUER_ID: 7d812fe2-8abd-47ca-9d27-3ed7e62d7b6d
        APP_STORE_CONNECT_KEY_IDENTIFIER: VBSYWCX764
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmdMVFFSQWxpTURzQjRhcmFieS1aUl9jeFFQWTlXMU5mZTNldjBKYkgwSVRoVWFtMmNfVFdjUjNJRWhTdmk0dVBoUnZIQkY4UUM5QzI0STVYZFZUcGdWMHpySDh5bWtOazJsUGF5RFVmUVhUM1dxcmZTUE51SDNaVHRRdDBTZVgwMEZQdC1ZUHdyUUI0bmZFNjMwSGpKZ1FYQjlwR1ZTU0MxM01nMDEwMmFRM25RRWlJbmN3SDQ5dFpDczVsVTVoY0U3M3hNTU5ORzh6N2FWU0Z2c0djMVYzN3ZxTjljYjJsbFBUaFd6cGZOWlRIV3B4T2VoMWZfN3ZQbEpvQ0ZqQU9sbDdEclNEejM2TDAwS2hNczA4RUw4VmEzc1NwdUdPc2dfSXI0YVRFY1FXekR3TEh6M1pJNFJUS0F2dGI0aDBSWXc1X185NlBQTXpVa1JVTDhrZFF1VWhIMmtIOHhJS21SR2t0ZmNjbzhNNUhLNWt3THI5SDFzcnl3SURMM3A0WDh2NW5WcTlIaHFkdEEzTWVlNkliZERrdkJ0Q092SE5aMk1wYXNocUZkQjVBTTJsZz0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmdMVFFSblFGN091VHBqbWdfSUlDOVlmUVR5T2Vvc2hHcE1YeEotS1NhT1oxWlJZakpQOC1EcmdGeTdjdTkxM3VjdEhCWWVfdUViazR0WGdBM0xEaklaVkc2aGFDYzNjamszLUI2ZGU1YmdRUl9lbHBaY2I2WjFidHI4eDZUV1JJUGt5YjZxaWpuZWZSd29hS0ZNNGQ5MF9kMGpHQ0VwQVdUa2I3dU1PbzRnWi1TanMzSW5WLXY2TFcxcWM4bnVFRUFCZ3JOYjJ2eE1wU0RISHVzd0xBM0xnV1FRLXRZMWg2d0dGQW5xYzcyck5VSlpRUU5HZ19qNW1qMGJXNHc4UGpNV1FOMUtEMjlfUldTOVgtVTZZQlpKRHlSTUV2Sk9KencxdlRqTnNIeldCZzRlQmVBMGNJdTJxSGdvVnh5bU1qZGE2WVVuYWlKOWFTaGxfLVE0SXBGdGJaaFJpLVdXWEMwQlJGODVqQzVJYk9WTzdVYWpwTGJyQ0tmekEzT1A1NS1QOUlQa1diUWtCbUU4Q2VOU3I5Umk2ZEIxWGJUb1o3MVVTNHpmeW1PZXVjWGFUTHdnOERkTDlJZjVaV29GRGZISVFZSHVvVUlSNk9mbWRWS1lTUXFmcGRocEFIczFSMXZDVFNoZVN0SVNUak1aeGFRUE9PaXAwRi11Y2pqZUtYVGYyZ2xYeGdrYUppY2pTNVdLcVhJTmxnRHc4c3B5anNJZGg2QlJTek5JMGdKRUE3NEM2a3BoWFREUkZwZmFNWHdKOFJNLTR6S1FPbDIwZ2VqZlFNTmhoQ3ByaTlYTlgySTYwalRzVEVHcjRuOTdOREJrTDBCQTQ5aWNYSlY4aUQ1TjZRcWRlOHQ2Wl9ZcVNpMFVHY01MSk1rOWpVYUptem45Y0lRQkJ5T1ZHblJWNkZ0YXFrUEM2RkpiR2xWZkFhSUl6TzJlNHNFU2NZeDRZYzI4N0Q2NFVKdW8tVk9PZUV0ZzhkYlpsRU13WWFtYnhSV2E1MjlwYmQ5VEhIcnNZdC1iUXpmaFF4cV92ckJkaG0zN1A2bXZvaVYtc2tUb3BWMmZzREstS3kxR0Y1T25pM1NUc3dyMG9yS0dOMXFoOHhSTUw1YXo2LWlSOXVXZlFaWGtrS1dyTGZDSzNaQ2NBdWRGOHpEREVkOHp2WHZxTXpadDVxYlJqRmxMNFk1elV2VUJuREFVUHhYczlwTkVnR05VWlF4cjc1eHZVTU56cDlLZUk5NVJMRVNiVTVyNW9BamVfYUE1Wnl4azg2cWJNV2pNdnVYOXJzX2EtUjgzOEJtZ2VPVVdwbDJSb2NfSllMZ29TbDc3UWFlZER6N2gwQnFJNmJiOXpMbXU4c2tLLUxuTzBXdHlGNHVUZUZtUTNpN0VGbGRna0dsNl9UVllYb2xMb2l4TldnMjVGNktMeHl1NWVMMHhGbzlhcGlDQXdHNEItV1hrOF9DZWhFN1ZtOXJMSjBLX3VTcEJfNHI3THR5TFVrd01CMEtSN1dqOVJ2UlJjTlN6NEVEQ3BBV1Y1REppcDd5RG1HdDhBY0pRTEFlQzh5MkRZcXpQWnkwbWF2cEZVNXlsTmZJRTJuZFd6ZlRieUdOZWtUT3lXcE5vUGY1ZnliTDY0Y3ZFaTh4V0JfcHpnd2V4cGlnd1RnZm5FMzlxMjdmNjZ5cENWMW10aW1tTVNaZTFlNWs5eUVnMWpYanNJVDdpRmZ6VDFHZ3NrRk5WSjdMYkRDNWFwM2lNbzhxeVhiV2RTMHdJeGRXRXMwVnl2NHJybkFnQzBTMjJwVDFkMFJFVjRlekRUdDJ2enhkYTY1YktJUVZCaE13WWlpckZUdEdobzYzYjZENFJDN0VCOGl5ck03UHRqWFJCMHMwUTRJWlowNFZDWTMteFE2NFJmYUVrVWJFSGdUQ1dYcnp3TXotVVdZNFNyazM4amlIcmZxNzMyV1MwMl9jN3RxVy1YTUhwclEtZV9RZldadXRYa2E5ZXpwWFREdWEzcHA0c0NnSHBkdHB1WXFwRGlIbm1Xbzc5ZUZ2ckJHSXA2OXBZU2pYcUVXZldFcmNVeE85cDB2OWtDVkVjTEd5RGhoZTVXWUNNREoyQzBhM3Q0NkxNZ0RJVkZwSWJvaEJrTnlyb1ZFLVFyNTdVa3JmZFNiZy1kTm1wSWRHVFJHRHBrQmhyNmsxWUJfS3gxUkcxNWdJbThFRnRtVGdmS2Nab3Jib20tSTdOMjZaRFFUeGRKSDZUZjZKd09OR1dscFJ3cXR1SjRXd3hEeDRfbm5ZZEFpS1ZWZ1RFQzVHaEVFTjdndFZaTWRzT205MnVtMDcyNWVqVl9nYUtxMjFFUjBib2dKSGN1aDhsdWM2VDNEb2ZCWW1taWdoaTR5VEdFakhKUzE0Y29DbmpKNk42LTdmdklTQUhYRHlrOUJTM3RtM05iUElPUWItTkdvU0RUVGpWTHB2XzJxelc5bVIyclI4SUZHZkRvSnVRMEtCeXZkWTdCLTFHVktyMDZKVl9EZGQzRjBXNjh6WDJWLUFPVS1nckd2Ynd5YlhtWlhmYkVuRGwtZi1UTUdkdXVoYlJKeEpoVlpzWm44UC1nUVBVbDlHcUlWclRXLTZFZ3FkUktXclZfTkFzNzFKM29IVjNHU1NRU1hoOTd4TXRyT242Sjl5WlpSQTBIMUs2b1YyYzdSTU95UkowMklDYTdsNFo4TnB4QmVkMlBXVktpOUxCS3VOWXlmRE81RkYyYjZWX2Mxc0VBOGxXX1duYUZ3SHNqcVRGSzVhSmFKRUt4dzJMSEVQUmo5aWRXd2FIVGF6M0xOdmhlTzNxYi1YUTJfV1pPVk1wUW1vTktWMUtSZVN5OTZadW9UempRV3AyQXY0Q1l5dlZmaHFnMGhKQ0VkNWtzWTM5al90UUNXZFNSdVhVZUl5ZjdYcGdSRE5kQS1TVWRqbjRWTmhPVGNSOFp2aV9tVzZ6MkR2djdqREVSOWlQb0h4dWx5TF9qN1pyTDZLMExhZGs5QUFoRmViVDBHNGF5anRDTmRLeWdMdkczdVNkNnhZM2NLSFFjeU0zem5ncmVuM0dVbTRURW5t)
      flutter: dev
      xcode: latest
      cocoapods: default
    scripts:
      - flutter packages pub get
      - |
        #!/usr/bin/env bash

        keychain initialize
        app-store-connect fetch-signing-files "com.codemagic.newMacDesktop" --type MAC_APP_STORE --platform MAC_OS --create

        flutter config --enable-macos-desktop
        flutter build macos --release --build-name=1.0.0 --build-number=$BUILD_NUMBER
        chmod +x sign_and_publish.sh

        ./sign_and_publish.sh
    artifacts:
      - flutter_drive.log
      - build/macos/Build/Products/Release/*.app
